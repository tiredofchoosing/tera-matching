(function(){async function e(){try{const e=window.location.pathname,t="/partial"+e,n=await fetch(t,{headers:{"If-None-Match":L}});if(!n||!n.ok&&304!==n.status)throw`Request failed for '${t}' with status: ${n?.status}`;if(L=n.headers.get("ETag"),304===n.status)return;const a=await n.text(),c=document.createElement("div");c.innerHTML=a;const o=[];return c.childNodes.forEach((e=>{if(e.firstChild){const t=document.getElementById(e.id);t.innerHTML=e.innerHTML,o.push(t)}})),o.length>0?o:(console.warn("Partial update failed: no items have been updated."),null)}catch(e){return console.warn("Partial update failed:",e),null}}function t(n,a=!0){const c=s;a&&saveData(c,c.checked,!1),c.checked?v=setTimeout((async()=>{const n=await e();n&&n.length>0&&n.forEach((e=>e.dispatchEvent(p))),t(null,!1)}),E):-1!==v&&(clearTimeout(v),v=-1)}function n(e,t=!0){const n=d;t&&saveData(n,n.checked,!1);const a="blurred";n.checked&&!l.classList.contains(a)?l.classList.add(a):!n.checked&&l.classList.contains(a)&&l.classList.remove(a)}function a(){const e="ru"===this.value?"en":"ru",t=new Date;t.setFullYear(t.getFullYear()+1),document.cookie=`lang=${e};expires=${t.toUTCString()};path=/;`,location.reload()}function c(){window.innerWidth>=992&&u.classList.contains("show")&&(u.classList.add("no-transition"),h.hide(),setTimeout((()=>u.classList.remove("no-transition")),0))}function o(){const e=window.innerWidth<992;e&&f.parentNode!==g?g.appendChild(f):e||f.parentNode!==g||m.appendChild(f)}function i(){c(),o()}const s=document.getElementById("autoupdateCheck"),d=document.getElementById("blurBackground"),l=document.getElementById("background"),r=document.getElementById("switchLang"),u=document.getElementById("offcanvasRight"),h=bootstrap.Offcanvas.getOrCreateInstance(u),f=document.getElementById("filterContent"),m=document.getElementById("filterContainer"),g=u.querySelector("#offcanvasFilterContainer"),w=[s,d],E=5e3,p=new CustomEvent("contentUpdated");let v=-1,L="";s.addEventListener("change",t),d.addEventListener("change",n),r.addEventListener("click",a),window.addEventListener("resize",i),w.forEach((e=>{const t=loadData(e,!1);null!=t&&(e.checked="true"===t)})),n(null,!1),o(),t(null,!1)})();